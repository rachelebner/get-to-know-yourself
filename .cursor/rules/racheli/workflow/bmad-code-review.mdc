---
description: "BMAD: Code review workflow"
alwaysApply: false
---

# Code Review

**Trigger:** Code ready for review, PR review, or quality check before merge

## Actions

### 1. Gather Context

Before reviewing code:
- What story/feature is this implementing?
- What are the acceptance criteria?
- What files were changed/added?

Load relevant context:
- Story or ticket requirements
- Architecture/standards docs
- Tech spec for the area

### 2. Validate Acceptance Criteria

For EACH acceptance criterion:
- [ ] Read the AC requirement completely
- [ ] Search changed files for evidence of implementation
- [ ] Determine: IMPLEMENTED, PARTIAL, or MISSING
- [ ] Record specific evidence (file:line references)
- [ ] Check for corresponding tests

**AC Coverage Summary:** X of Y acceptance criteria implemented

### 3. Validate Task Completion

For EACH task marked complete:
- [ ] Read the task description
- [ ] Search for evidence the task was done
- [ ] Determine: VERIFIED, QUESTIONABLE, or NOT DONE
- [ ] Record evidence (file:line references)

**Critical:** Task marked complete but not done = HIGH severity finding

### 4. Code Quality Review

Check for common issues:
- [ ] Error handling
- [ ] Input validation
- [ ] Logging
- [ ] Resource cleanup
- [ ] Performance anti-patterns
- [ ] Thread-safety/async correctness

### 5. Security Review

Check for:
- [ ] Injection risks
- [ ] Auth handling (authZ/authN)
- [ ] Secret management
- [ ] Unsafe defaults
- [ ] Unvalidated redirects
- [ ] CORS configuration
- [ ] Dependency vulnerabilities

### 6. Test Quality Review

Verify tests:
- [ ] Meaningful assertions
- [ ] Edge cases covered
- [ ] Deterministic behavior
- [ ] Proper fixtures
- [ ] No flakiness patterns

### 7. Determine Outcome

| Outcome | Criteria |
|---------|----------|
| **BLOCKED** | Any HIGH severity finding |
| **CHANGES REQUESTED** | MEDIUM severity or multiple LOW |
| **APPROVE** | All ACs implemented, tasks verified, no significant issues |

### 8. Document Findings

Structure review report:

```markdown
## Summary
[Brief overview and outcome]

## Outcome: [Approve | Changes Requested | Blocked]

## Key Findings

### High Severity
- [Finding with file:line reference]

### Medium Severity
- [Finding with file:line reference]

### Low Severity
- [Finding with file:line reference]

## Action Items

**Code Changes Required:**
- [ ] [High] Description [file: path:line]
- [ ] [Med] Description [file: path:line]

**Advisory Notes:**
- Note: Description (no action required)
```


## Reminders

- Zero tolerance for unverified completions - check every claim
- Every validation needs evidence (file:line)
- Action items need checkboxes for tracking
- Don't skip steps - systematic review catches issues
